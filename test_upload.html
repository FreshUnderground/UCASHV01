<!DOCTYPE html>
<html>
<head>
    <title>Test Upload Dépôt</title>
</head>
<body>
    <h1>Test Upload Dépôt</h1>
    <button onclick="testUpload()">Envoyer Test Dépôt</button>
    <pre id="result"></pre>

    <script>
        async function testUpload() {
            const data = {
                entities: [{
                    code_ops: 'TEST_' + Date.now(),
                    type: 3, // depot
                    statut: 2, // terminee
                    montant_brut: 100,
                    montant_net: 100,
                    commission: 0,
                    devise: 'USD',
                    client_nom: 'Test Client',
                    agent_id: 6,
                    agent_username: 'Lareine',
                    shop_source_id: 1764100003058,
                    shop_source_designation: 'shop kisangani',
                    mode_paiement: 0, // cash
                    notes: 'Test depuis HTML',
                    last_modified_at: new Date().toISOString()
                }],
                user_id: 'test_html',
                timestamp: new Date().toISOString()
            };

            try {
                const response = await fetch('https://shops.investee-group.com/server/api/sync/operations/upload.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                document.getElementById('result').textContent = JSON.stringify(result, null, 2);
                console.log('Réponse:', result);
            } catch (error) {
                document.getElementById('result').textContent = 'Erreur: ' + error.message;
                console.error('Erreur:', error);
            }
        }
    </script>
</body>
</html>
